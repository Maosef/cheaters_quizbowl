(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{47:function(e,t,a){},50:function(e,t,a){},72:function(e,t,a){e.exports=a(85)},77:function(e,t,a){},85:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(8),i=a.n(r),o=(a(77),a(50)),l=a(11),c=a(12),u=a(6),h=a(13),d=a(14),m=a(15),p=a(110),b=a(111),f=a(118),v=a(58),g=a(4),w=function(e){return{root:{margin:10,padding:20},paper:{margin:10,padding:20,textAlign:"center"},paperBig:{padding:20,height:300,textAlign:"center"}}},y=a(115),E=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={query:"",evidence:"",answer:""},n.handleChange=n.handleChange.bind(Object(u.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(u.a)(n)),n}return Object(c.a)(a,[{key:"handleChange",value:function(e){var t=e.target.name;this.setState(Object(v.a)({},t,e.target.value))}},{key:"handleSubmit",value:function(e){var t=this.state;e.preventDefault(),this.props.onSubmit(t.query,t.evidence,t.answer)}},{key:"render",value:function(){var e=this.props.classes;return s.a.createElement("form",{className:e.root,noValidate:!0,autoComplete:"off"},s.a.createElement("div",null,s.a.createElement(y.a,{name:"query",value:this.state.query,onChange:this.handleChange,label:"write query here",variant:"outlined",style:{display:"block",margin:10}}),s.a.createElement(y.a,{name:"evidence",value:this.state.evidence,onChange:this.handleChange,label:"write helpful results here",variant:"outlined",style:{display:"block",margin:10}}),s.a.createElement(y.a,{name:"answer",value:this.state.answer,onChange:this.handleChange,label:"write answer here",variant:"outlined",style:{display:"block",margin:10}}),s.a.createElement(f.a,{variant:"contained",color:"secondary",onClick:this.handleSubmit},"Submit")))}}]),a}(s.a.Component),S=Object(g.a)(w)(E),k=(s.a.Component,s.a.Component,function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={isToggled:!1,label:"Continue"},n.handleClick=n.handleClick.bind(Object(u.a)(n)),n}return Object(c.a)(a,[{key:"handleClick",value:function(){this.props.onClick()}},{key:"render",value:function(){return s.a.createElement(f.a,{variant:"contained",color:"secondary",onClick:this.handleClick},this.state.label)}}]),a}(s.a.Component)),j=a(59),O=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={wordIndex:0,sentenceIndex:0,words:[],text:"",isReading:!1},n.sentences=e.tokenizations.map((function(t){var a;return(a=e.text).slice.apply(a,Object(j.a)(t))})),n.read=n.read.bind(Object(u.a)(n)),n.readWords=n.readWords.bind(Object(u.a)(n)),n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.read()}},{key:"componentDidUpdate",value:function(e){e.interrupted!==this.props.interrupted&&this.state.sentenceIndex+1<=this.sentences.length&&this.read()}},{key:"read",value:function(){var e=this;this.setState({wordIndex:0,isReading:!0}),this.readerID=setInterval((function(){return e.readWords(e.state.sentenceIndex)}),100)}},{key:"readWords",value:function(e){var t=this.sentences[e].trim().split(" ");this.state.wordIndex>=t.length?(clearInterval(this.readerID),this.setState({sentenceIndex:this.state.sentenceIndex+1}),this.state.sentenceIndex<this.sentences.length&&this.setState({isReading:!1}),this.props.updateSentencePosition(this.state.sentenceIndex)):this.setState({text:this.state.text+" "+t[this.state.wordIndex],wordIndex:this.state.wordIndex+1})}},{key:"render",value:function(){if(!this.state.isReading)var e=s.a.createElement(k,{onClick:this.read,style:{flex:1}});return s.a.createElement("div",null,s.a.createElement("p",null,this.state.text),e)}}]),a}(s.a.Component),x=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={answer:""},n.handleChange=n.handleChange.bind(Object(u.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(u.a)(n)),n}return Object(c.a)(a,[{key:"handleChange",value:function(e){this.setState({answer:e.target.value})}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.onSubmit(this.state.answer)}},{key:"render",value:function(){var e=this.props.classes;return s.a.createElement("form",{onSubmit:this.handleSubmit,className:e.root,noValidate:!0,autoComplete:"off"},s.a.createElement(y.a,{value:this.state.answer,onChange:this.handleChange,id:"answer_box",label:this.props.label,variant:"outlined"}))}}]),a}(s.a.Component),C=Object(g.a)(w)(x),_=(s.a.Component,function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).fetchWikiData=n.fetchWikiData.bind(Object(u.a)(n)),n.state={query:"",titles:[],summaries:[]},n}return Object(c.a)(a,[{key:"fetchWikiData",value:function(e){var t=this;console.log(e),fetch(this.props.server_url+"/search_wiki?query="+e).then((function(e){return e.json()})).then((function(e){console.log("Result: ",e),t.setState({titles:e.summaries})}),(function(e){console.log("error"),t.setState({isLoaded:!0,error:e})}))}},{key:"render",value:function(){this.props.classes;var e=this.state.titles.map((function(e){return s.a.createElement("li",{key:e.toString()},e.slice(0,100))}));return s.a.createElement("div",null,s.a.createElement(C,{onSubmit:this.fetchWikiData,label:"Search..."}),s.a.createElement("ul",null,e))}}]),a}(s.a.Component)),q=(Object(g.a)(w)(_),function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).handleBuzz=n.handleBuzz.bind(Object(u.a)(n)),n.fetchData=n.fetchData.bind(Object(u.a)(n)),n.finishQuestion=n.finishQuestion.bind(Object(u.a)(n)),n.finishQuestion_multi=n.finishQuestion_multi.bind(Object(u.a)(n)),n.cleanText=n.cleanText.bind(Object(u.a)(n)),n.skipQuestion=n.skipQuestion.bind(Object(u.a)(n)),n.question_ids=[53873,181475,115844,6449,26626,16848,15469,102066,151976,90037],n.state={sessionToken:"",question_id:-1,question_idx:0,question:"",category:"",page:"",tokenizations:[],year:-1,tournament:"",interrupted:!1,finished:!1,numSeen:0,score:0,isLoaded:!1,sentenceIndex:0},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this.question_ids[0];this.fetchData(e)}},{key:"handleBuzz",value:function(){console.log(this.state.interrupted),this.setState({interrupted:!this.state.interrupted})}},{key:"fetchData",value:function(e){var t=this;fetch("/api/qanta/v1/"+e).then((function(e){return e.json()})).then((function(e){t.setState({isLoaded:!0,question_id:e.qanta_id,question:e.text,answer:e.answer,category:e.category,page:e.page,tokenizations:e.tokenizations,year:e.year,tournament:e.tournament})}),(function(e){console.log("error"),t.setState({isLoaded:!0,error:e})}))}},{key:"cleanText",value:function(e){var t=e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/ *\([^)]*\) */g,"").toLowerCase().replace(/[.,\/#!$%\^&\*;:{}=\-_`~()\s"'\u201d\u201c]/g,"");return alert(t),t}},{key:"finishQuestion_multi",value:function(e,t,a){var n=this.state.question_idx+1;this.setState({interrupted:!1,numSeen:this.state.numSeen+1,question:"",question_idx:this.state.question_idx+1}),console.log(n),this.cleanText(a)==this.cleanText(this.state.page)?(alert("Correct"),this.setState({score:this.state.score+1})):alert("Incorrect");var s={session_id:window.sessionStorage.getItem("token"),question_id:this.state.question_id,answer:a,query:e,evidence:t,stop_position:this.state.sentenceIndex};if(console.log(s),fetch("/api/qanta/v1/post_data",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}).then((function(e){return e.json()})).then((function(e){console.log("Post Success:",e)})).catch((function(e){console.error("Error:",e)})),n<this.question_ids.length){console.log(n);var r=this.question_ids[n];setTimeout(this.fetchData(r),2e3)}else alert("Test Completed!")}},{key:"finishQuestion",value:function(e){this.setState({interrupted:!1,numSeen:this.state.numSeen+1,question:""}),this.cleanText(e)==this.cleanText(this.state.answer)?(alert("Correct"),this.setState({score:this.state.score+1})):alert("Incorrect"),setTimeout(this.fetchData,2e3)}},{key:"skipQuestion",value:function(){var e=this.state.question_idx+1;this.setState({interrupted:!1,numSeen:this.state.numSeen+1,question:"",question_idx:e});var t=this.question_ids[e];setTimeout(this.fetchData(t),2e3)}},{key:"render",value:function(){var e=this;if(null==window.sessionStorage.getItem("token"))return s.a.createElement(m.a,{to:"/login"});var t=this.props.classes;return s.a.createElement("div",{className:t.root},s.a.createElement(b.a,{container:!0,spacing:3,bgcolor:"background.paper"},s.a.createElement(b.a,{item:!0,xs:12},s.a.createElement(p.a,{className:t.paperBig},this.state.question.length?s.a.createElement(O,{text:this.state.question,tokenizations:this.state.tokenizations,updateSentencePosition:function(t){return e.setState({sentenceIndex:t})}}):"Waiting")),s.a.createElement(b.a,{item:!0,xs:4},s.a.createElement(S,{onSubmit:this.finishQuestion_multi,label:"Answer_multi"}),s.a.createElement(f.a,{variant:"contained",color:"secondary",onClick:this.skipQuestion},"Skip")),s.a.createElement(b.a,{item:!0,xs:4},s.a.createElement(p.a,{className:t.paper},"Statistics ",s.a.createElement("br",null),s.a.createElement("br",null),"Category: ",this.state.category," ",s.a.createElement("br",null),"Answer: ",this.state.page," ",s.a.createElement("br",null),"Score: ",this.state.score," ",s.a.createElement("br",null),"Number of Questions seen: ",this.state.numSeen," ",s.a.createElement("br",null),this.state.tournament," ",this.state.year)),s.a.createElement(b.a,{item:!0,xs:4},s.a.createElement(p.a,{className:t.paper},"Instructions ",s.a.createElement("br",null),s.a.createElement("br",null),"Try to answer the quizbowl question using as few clues as possible. ",s.a.createElement("br",null),"You may use Google. Record your search query(s), and the titles of helpful search results (if any). ",s.a.createElement("br",null),"Hit ",s.a.createElement("code",null,"Continue")," to reveal the next clue. ",s.a.createElement("br",null),"Hit ",s.a.createElement("code",null,"Submit")," to submit your answer. You get one attempt."))))}}]),a}(s.a.Component)),I=Object(g.a)(w)(q);a(117);var T=a(119),N=a(113),D=a(48),P=a.n(D),W=a(114),U=a(112),z=a(47),Q=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={username:"",password:"dummy",token:"",username_helper:"",password_helper:""},n.handleUsername=n.handleUsername.bind(Object(u.a)(n)),n.handlePassword=n.handlePassword.bind(Object(u.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(u.a)(n)),n}return Object(c.a)(a,[{key:"handleUsername",value:function(e){this.setState({username:e.target.value})}},{key:"handlePassword",value:function(e){this.setState({password:e.target.value})}},{key:"handleSubmit",value:function(e){var t=this,a="username="+encodeURIComponent(this.state.username)+"&password="+encodeURIComponent(this.state.password);fetch("/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",accept:"application/json"},body:a}).then((function(e){return e.json()})).then((function(e){if("access_token"in e){var a=e.access_token;window.sessionStorage.setItem("token",a),t.setState({username:t.state.username})}else t.setState({username:"",password:"",username_helper:"Invalid email or password",password_helper:""})})),e.preventDefault()}},{key:"render",value:function(){return window.sessionStorage.getItem("token")?n.createElement(m.a,{to:"/"}):(console.log("Login style "+z),n.createElement(U.a,{maxWidth:"xs"},n.createElement(N.a,null),n.createElement("div",{className:"paper"},n.createElement(T.a,{className:"avatar"},n.createElement(P.a,null)),n.createElement(W.a,{component:"h1",variant:"h4"},"Quizbowl with Cheating"),n.createElement("form",{className:"form",noValidate:!0,onSubmit:this.handleSubmit},n.createElement(y.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"username",label:"Username",name:"username",value:this.state.username,onChange:this.handleUsername,helperText:this.state.username_helper,autoFocus:!0}),n.createElement(f.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:"submit"},"Start!"),n.createElement(b.a,{container:!0,className:"signup"},n.createElement(b.a,{item:!0,xs:!0}),n.createElement(b.a,{item:!0},n.createElement("a",{href:"/register",className:"register"})))))))}}]),a}(n.Component),R=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).valid_email=function(e){return!!/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/.test(e)},n.state={username:"",password:"",verify_password:"",username_helper:"",password_helper:"",token:""},n.handleUsername=n.handleUsername.bind(Object(u.a)(n)),n.handlePassword=n.handlePassword.bind(Object(u.a)(n)),n.handleVerifyPassword=n.handleVerifyPassword.bind(Object(u.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(u.a)(n)),n}return Object(c.a)(a,[{key:"handleUsername",value:function(e){this.setState({username:e.target.value})}},{key:"handlePassword",value:function(e){this.setState({password:e.target.value})}},{key:"handleVerifyPassword",value:function(e){this.setState({verify_password:e.target.value})}},{key:"handleSubmit",value:function(e){var t=this;if(this.valid_email(this.state.username))if(this.state.password===this.state.verify_password){var a="username="+encodeURIComponent(this.state.username)+"&password="+encodeURIComponent(this.state.password);fetch("/token/register",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",accept:"application/json"},body:a}).then((function(e){return e.json()})).then((function(e){if("access_token"in e){var a=e.access_token;window.sessionStorage.setItem("token",a),t.setState({username:t.state.username})}else t.setState({username:"",password:"",verify_password:"",username_helper:"Username already used",password_helper:""})}))}else this.setState({username_helper:"",password_helper:"Passwords don't match",password:"",verify_password:""});else this.setState({username:"",password:"",verify_password:"",username_helper:"Not a valid email  ",password_helper:""});e.preventDefault()}},{key:"render",value:function(){return window.sessionStorage.getItem("token")?n.createElement(m.a,{to:"/"}):(console.log("Register style "+z),n.createElement(U.a,{maxWidth:"xs"},n.createElement(N.a,null),n.createElement("div",{className:"paper"},n.createElement(T.a,{className:"avatar"},n.createElement(P.a,null)),n.createElement(W.a,{component:"h1",variant:"h4"},"Register"),n.createElement("form",{className:"form",noValidate:!0,onSubmit:this.handleSubmit},n.createElement(y.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"username",label:"Email",name:"username",value:this.state.username,onChange:this.handleUsername,helperText:this.state.username_helper,autoFocus:!0}),n.createElement(y.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:this.state.password,onChange:this.handlePassword,helperText:this.state.password_helper}),n.createElement(y.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"verify_password",label:"Verify Password",type:"password",id:"password",autoComplete:"current-password",value:this.state.verify_password,onChange:this.handleVerifyPassword}),n.createElement(f.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:"submit"},"Sign Up"),n.createElement(b.a,{container:!0,className:"signup"},n.createElement(b.a,{item:!0,xs:!0}),n.createElement(b.a,{item:!0},n.createElement("a",{href:"/login",className:"register"},"Already have an account? Login ")))))))}}]),a}(n.Component),V=a(36);var B=function(){return console.log("App style "+o),n.createElement(V.a,null,n.createElement(m.d,null,n.createElement(m.b,{path:"/login"},n.createElement(Q,null)),n.createElement(m.b,{path:"/register"},n.createElement(R,null)),n.createElement(m.b,{path:"/"},n.createElement(I,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(B,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[72,1,2]]]);
//# sourceMappingURL=main.b8dc7cbd.chunk.js.map